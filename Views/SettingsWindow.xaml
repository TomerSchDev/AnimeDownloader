<Window x:Class="AnimeBingeDownloader.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings" 
        Height="600" Width="700"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize">
    
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" 
                   Text="Application Settings" 
                   FontSize="20" 
                   FontWeight="Bold"
                   Margin="0,0,0,10"/>
        <StackPanel Grid.Row="0"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
            >
            <Button  x:Name="SaveButton" 
                    Content="Save" 
                    Click="SaveButton_Click" 
                    Width="100" 
                    Margin="5"/>
            <Button x:Name="CancelButton" 
                    Content="Cancel" 
                    Click="CancelButton_Click" 
                    Width="100" 
                    Margin="5"/>
        </StackPanel>
        
        <!-- Tab Control for Settings Categories -->
        <TabControl x:Name="MainTabControl" Grid.Row="1" Margin="0,10,0,0">
            <!-- General Tab -->
            <TabItem Header="General">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="5">
                    <StackPanel>
                        <!-- Download Settings Group -->
                        <GroupBox Header="Download Settings" Margin="0,0,0,15" Padding="10">
                            <StackPanel>
                                <!-- Default Directory -->
                                <Label Content="Default Download Directory:" FontWeight="Bold" Margin="0,0,0,5"/>
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <TextBox x:Name="DirectoryTextBox"
                                             Grid.Column="0"
                                             Padding="5"
                                             VerticalAlignment="Center"
                                             TextChanged="SettingChanged"/>
                                    
                                    <Button x:Name="BrowseButton"
                                            Grid.Column="1"
                                            Content="Browse"
                                            Width="80"
                                            Margin="5,0,0,0"
                                            Click="BrowseButton_Click"/>
                                </Grid>

                                <!-- Max Concurrent Downloads -->
                                <Label Content="Max Concurrent Downloads:" FontWeight="Bold" Margin="0,10,0,5"/>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                    <Slider x:Name="MaxDownloadsSlider"
                                            Width="300"
                                            Minimum="1"
                                            Maximum="10"
                                            TickFrequency="1"
                                            IsSnapToTickEnabled="True"
                                            VerticalAlignment="Center"
                                            ValueChanged="MaxDownloadsSlider_ValueChanged"/>
                                    <TextBlock x:Name="MaxDownloadsLabel"
                                               Text="5"
                                               Width="30"
                                               Margin="10,0,0,0"
                                               VerticalAlignment="Center"
                                               FontWeight="Bold"/>
                                </StackPanel>

                                <!-- Max Retry Attempts -->
                                <Label Content="Max Retry Attempts:" FontWeight="Bold" Margin="0,10,0,5"/>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                    <Slider x:Name="MaxRetriesSlider"
                                            Width="300"
                                            Minimum="1"
                                            Maximum="10"
                                            TickFrequency="1"
                                            IsSnapToTickEnabled="True"
                                            VerticalAlignment="Center"
                                            ValueChanged="MaxRetriesSlider_ValueChanged"/>
                                    <TextBlock x:Name="MaxRetriesLabel"
                                               Text="5"
                                               Width="30"
                                               Margin="10,0,0,0"
                                               VerticalAlignment="Center"
                                               FontWeight="Bold"/>
                                </StackPanel>

                                <!-- Min Time After Error -->
                                <Label Content="Min Time After Error (seconds):" FontWeight="Bold" Margin="0,10,0,5"/>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                    <Slider x:Name="MinTimeAfterErrorSlider"
                                            Width="300"
                                            Minimum="1"
                                            Maximum="30"
                                            TickFrequency="1"
                                            IsSnapToTickEnabled="True"
                                            VerticalAlignment="Center"
                                            ValueChanged="MinTimeAfterErrorSlider_ValueChanged"/>
                                    <TextBlock x:Name="MinTimeAfterErrorLabel"
                                               Text="5"
                                               Width="30"
                                               Margin="10,0,0,0"
                                               VerticalAlignment="Center"
                                               FontWeight="Bold"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <!-- Cache Settings Group -->
                        <GroupBox Header="Cache Settings" Margin="0,0,0,15" Padding="10">
                            <StackPanel>
                                <!-- Cache Expiration -->
                                <Label Content="Cache Expiration (Hours):" FontWeight="Bold" Margin="0,0,0,5"/>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                    <Slider x:Name="CacheExpirationSlider"
                                            Width="300"
                                            Minimum="1"
                                            Maximum="168"
                                            TickFrequency="1"
                                            IsSnapToTickEnabled="True"
                                            VerticalAlignment="Center"
                                            ValueChanged="CacheExpirationSlider_ValueChanged"/>
                                    <TextBlock x:Name="CacheExpirationLabel"
                                               Text="24"
                                               Width="40"
                                               Margin="10,0,0,0"
                                               VerticalAlignment="Center"
                                               FontWeight="Bold"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <!-- General Settings Group -->
                        <GroupBox Header="Application Behavior" Margin="0,0,0,15" Padding="10">
                            <StackPanel>
                                <CheckBox x:Name="AutoStartDownloadsCheckBox"
                                          Content="Automatically start downloads after scraping"
                                          Margin="0,0,0,10"
                                          Checked="SettingChanged"
                                          Unchecked="SettingChanged"/>
                                
                                <CheckBox x:Name="ShowNotificationsCheckBox"
                                          Content="Show notifications on task completion"
                                          Margin="0,0,0,10"
                                          Checked="SettingChanged"
                                          Unchecked="SettingChanged"/>
                                
                                <CheckBox x:Name="PrintToScreenCheckBox"
                                          Content="Show logs in console"
                                          Margin="0,0,0,10"
                                          Checked="SettingChanged"
                                          Unchecked="SettingChanged"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Browser Tab -->
            <TabItem Header="Browser">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="5">
                    <StackPanel>
                        <GroupBox Header="Browser Settings" Margin="0,0,0,15" Padding="10">
                            <StackPanel>
                                <CheckBox x:Name="MinimizeBrowserCheckBox"
                                          Content="Minimize browser window during scraping"
                                          Margin="0,0,0,10"
                                          Checked="SettingChanged"
                                          Unchecked="SettingChanged"/>
                                
                                <!-- Add more browser-specific settings here -->
                                <Label Content="User Agent:" FontWeight="Bold" Margin="0,10,0,5"/>
                                <TextBox x:Name="UserAgentTextBox"
                                         Padding="5"
                                         TextChanged="SettingChanged"/>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <!-- Browser Type -->
                                    <Label Content="Browser Type:" 
                                           FontWeight="Bold" 
                                           Margin="0,5"
                                           VerticalAlignment="Center"
                                           Grid.Row="0" Grid.Column="0"/>
                                    <ComboBox x:Name="BrowserTypeComboBox"
                                              SelectedIndex="0"
                                              Margin="0,5"
                                              Padding="5"
                                              Grid.Row="0" Grid.Column="1"
                                              SelectionChanged="SettingChanged"
                                              ToolTip="Select the browser to use for web scraping">
                                        <ComboBoxItem Content="Chrome" Tag="Chrome"/>
                                        <ComboBoxItem Content="Firefox" Tag="Firefox"/>
                                        <ComboBoxItem Content="Edge" Tag="Edge"/>
                                    </ComboBox>

                                    <!-- Headless Mode -->
                                    <CheckBox x:Name="HeadlessModeCheckBox"
                                              Content="Headless Mode"
                                              Margin="0,10,0,5"
                                              Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
                                              Checked="SettingChanged"
                                              Unchecked="SettingChanged"
                                              ToolTip="Run the browser in headless mode (no visible UI)"/>

                                    <!-- Disable Images -->
                                    <CheckBox x:Name="DisableImagesCheckBox"
                                              Content="Disable Images"
                                              Margin="0,5"
                                              Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2"
                                              Checked="SettingChanged"
                                              Unchecked="SettingChanged"
                                              ToolTip="Disable loading images to improve performance"/>

                                    <!-- Disable JavaScript -->
                                    <CheckBox x:Name="DisableJavaScriptCheckBox"
                                              Content="Disable JavaScript"
                                              Margin="0,5"
                                              Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2"
                                              Checked="SettingChanged"
                                              Unchecked="SettingChanged"
                                              ToolTip="Disable JavaScript (may break some websites)"/>

                                    <!-- Page Load Timeout -->
                                    <Label Content="Page Load Timeout (seconds):" 
                                           FontWeight="Bold" 
                                           Margin="0,5"
                                           VerticalAlignment="Center"
                                           Grid.Row="4" Grid.Column="0"/>
                                    <Grid Grid.Row="4" Grid.Column="1" Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Slider x:Name="PageLoadTimeoutSlider"
                                                Minimum="10"
                                                Maximum="300"
                                                TickFrequency="10"
                                                IsSnapToTickEnabled="True"
                                                ValueChanged="SettingChanged"
                                                ToolTip="Maximum time to wait for a page to load"/>
                                        <TextBlock Text="{Binding ElementName=PageLoadTimeoutSlider, Path=Value, StringFormat={}{0} s}"
                                                   Margin="5,0,0,0"
                                                   Grid.Column="1"
                                                   VerticalAlignment="Center"/>
                                    </Grid>

                                    <!-- User Data Directory -->
                                    <Label Content="User Data Directory:" 
                                           FontWeight="Bold" 
                                           Margin="0,5"
                                           VerticalAlignment="Center"
                                           Grid.Row="5" Grid.Column="0"/>
                                    <Grid Grid.Row="5" Grid.Column="1" Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBox x:Name="UserDataDirTextBox"
                                                 Text="{Binding UserDataDir, UpdateSourceTrigger=PropertyChanged}"
                                                 Padding="5"
                                                 IsReadOnly="True"/>
                                        <Button x:Name="BrowseUserDataDirButton"
                                                Content="..."
                                                Padding="10,2"
                                                Margin="5,0,0,0"
                                                Grid.Column="1"
                                                Click="BrowseUserDataDirButton_Click"
                                                ToolTip="Select directory to store browser user data"/>
                                    </Grid>
                                </Grid>
                                
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Logging Tab -->
            <TabItem Header="Logging">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="5">
                    <StackPanel>
                        <GroupBox Header="Log File Settings" Margin="0,0,0,15" Padding="10">
                            <StackPanel>
                                <Label Content="Log File Path:" FontWeight="Bold" Margin="0,0,0,5"/>
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <CheckBox x:Name="EnableFileLoggingCheckBox"
                                              Grid.Row="0"
                                              Content="Enable file logging"
                                              Margin="0,10,0,10"
                                              Checked="SettingChanged"
                                              Unchecked="SettingChanged"/>
                                    
                                    <TextBox x:Name="LogFilePathTextBox"
                                             Grid.Row="1"
                                             Grid.Column="0"
                                             Padding="5"
                                             TextChanged="SettingChanged"/>
                                    
                                    <Button x:Name="BrowseLogFileButton"
                                            Grid.Column="1"
                                            Grid.Row="1"
                                            Content="Browse"
                                            Width="80"
                                            Margin="5,0,0,0"
                                            Click="BrowseLogFileButton_Click"/>
                                </Grid>
                                
                                
                                
                                <Label Content="Max Log File Size (MB):" FontWeight="Bold" Margin="0,10,0,5"/>
                                <Slider x:Name="MaxLogSizeSlider"
                                        Minimum="1"
                                        Maximum="100"
                                        TickFrequency="1"
                                        IsSnapToTickEnabled="True"
                                        Margin="0,0,0,10"
                                        ValueChanged="MaxLogSizeSlider_ValueChanged"/>
                                <TextBlock x:Name="MaxLogSizeLabel"
                                           Text="10 MB"
                                           HorizontalAlignment="Center"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Debug Tab -->
            <TabItem Header="Debug" x:Name="DebugTab">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="5">
                    <StackPanel>
                        <GroupBox Header="Debug Options" Margin="0,0,0,15" Padding="10">
                            <StackPanel>
                                <CheckBox x:Name="EnableDebugModeCheckBox"
                                          Content="Enable Debug Mode"
                                          Margin="0,0,0,10"
                                          Checked="SettingChanged"
                                          Unchecked="SettingChanged"/>
                                
                                <CheckBox x:Name="VerboseLoggingCheckBox"
                                          Content="Enable Verbose Logging"
                                          Margin="0,0,0,10"
                                          Checked="SettingChanged"
                                          Unchecked="SettingChanged"
                                          IsEnabled="{Binding ElementName=EnableDebugModeCheckBox, Path=IsChecked}"/>
                                
                                <Label Content="Debug Log Level:" FontWeight="Bold" Margin="0,10,0,5"/>
                                <ComboBox x:Name="DebugLogLevelComboBox"
                                          SelectedIndex="0"
                                          IsEnabled="{Binding ElementName=EnableDebugModeCheckBox, Path=IsChecked}"
                                          SelectionChanged="DebugLogLevelComboBox_SelectionChanged">
                                    <ComboBoxItem>Debug</ComboBoxItem>
                                    <ComboBoxItem>Info</ComboBoxItem>
                                    <ComboBoxItem>Warning</ComboBoxItem>
                                    <ComboBoxItem>Error</ComboBoxItem>
                                </ComboBox>
                                
                                <Button x:Name="ExportLogsButton"
                                        Content="Export Debug Logs"
                                        Width="150"
                                        Margin="0,20,0,10"
                                        HorizontalAlignment="Left"
                                        Click="ExportLogsButton_Click"/>
                                
                                <Button x:Name="ClearCacheButton"
                                        Content="Clear Application Cache"
                                        Width="150"
                                        Margin="0,10,0,10"
                                        HorizontalAlignment="Left"
                                        Click="ClearCacheButton_Click"/>
                                
                                <Button x:Name="TestNotificationButton"
                                        Content="Test Notification"
                                        Width="150"
                                        Margin="0,10,0,10"
                                        HorizontalAlignment="Left"
                                        Click="TestNotificationButton_Click"/>
                            </StackPanel>
                        </GroupBox>
                        
                        <GroupBox Header="Developer Tools" Margin="0,0,0,15" Padding="10">
                            <StackPanel>
                                <Button x:Name="OpenDevToolsButton"
                                        Content="Open Browser DevTools"
                                        Width="180"
                                        Margin="0,0,0,10"
                                        HorizontalAlignment="Left"
                                        Click="OpenDevToolsButton_Click"/>
                                        
                                <Button x:Name="CheckForUpdatesButton"
                                        Content="Check for Updates"
                                        Width="180"
                                        Margin="0,0,0,10"
                                        HorizontalAlignment="Left"
                                        Click="CheckForUpdatesButton_Click"/>
                                        
                                <Button x:Name="ResetSettingsButton"
                                        Content="Reset All Settings to Default"
                                        Width="180"
                                        Margin="0,0,0,10"
                                        HorizontalAlignment="Left"
                                        Click="ResetSettingsButton_Click"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- Status Bar -->
        <StatusBar Grid.Row="2" Height="25" Margin="0,10,0,0">
            <StatusBarItem>
                <TextBlock x:Name="StatusTextBlock" Text="Ready" FontStyle="Italic"/>
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock x:Name="VersionTextBlock" Text="v1.0.0" Margin="10,0,0,0"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>